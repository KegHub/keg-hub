{"version":3,"file":"useToggleAnimate.js","sources":["../../../src/hooks/useToggleAnimate.js"],"sourcesContent":["import { useState, useLayoutEffect, useRef } from 'react'\nimport { Animated, Easing } from 'react-native'\nimport { checkCall, isObj } from '@keg-hub/jsutils'\n\n/**\n * Default animation config\n * @object\n */\nconst defConfig = {\n  duration: 1000,\n  easing: Easing.linear,\n  toValue: 0,\n}\n\n/**\n * Checks if the animation should NOT run\n * @function\n * @param {boolean} toggled - Current state of the Slider toggled open\n * @param {number} current - Current height of the Slider / animated.value\n * @param {number} values - Ref that holds the from and to values\n *\n * @returns {boolean} - If the animation should NOT run\n */\nconst noAnimate = (toggled, current, { from, to }) =>\n  (!toggled && current === from) || (toggled && current === to)\n\n/**\n * Builds the config passed to the Animation timing method\n * @function\n * @param {Object} config - Custom animation config\n * @param {number} values - Values being animated\n *\n * @returns {Object} - Built animation config\n */\nconst buildConfig = (config, values) => {\n  return (\n    checkCall(config, defConfig, values) || {\n      ...defConfig,\n      ...(isObj(config) ? config : {}),\n      toValue: values.to,\n    }\n  )\n}\n\n/**\n * Checks if the animation should NOT run\n * @function\n * @param {boolean} props.toggled - Flag to switch the animation state between from and to\n * @param {Object|function} config - Animation config object or function that returns an object\n * @param {function} props.onFinish - Callback called after the animation is toggled\n * @param {Object} props.values - Contains the from and to values to animate between\n *\n * @returns {Object} - Object containing the animation and values objects\n */\nexport const useToggleAnimate = props => {\n  const { config, toggled, onFinish } = props\n\n  // Define the default values as a ref\n  const values = useRef({ from: 0, to: 0, ...props.values })\n\n  // Define the animated value with a state hook\n  const [animation] = useState(new Animated.Value(values.current.from))\n\n  useLayoutEffect(() => {\n    if (noAnimate(toggled, animation._value, values.current)) return\n\n    // Define the from and to values for the animation based on toggled flag\n    const { from, to } = values.current\n    const aniChanges = toggled ? values.current : { from: to, to: from }\n\n    // Update the animation value to animate from\n    animation.setValue(aniChanges.from)\n\n    // Setup and from the animation\n    Animated.timing(animation, buildConfig(config, aniChanges)).start(() =>\n      checkCall(onFinish, props, animation, values)\n    )\n\n    // Add toggled as a dep, so anytime it changes, we run the hook code\n  }, [toggled])\n\n  return { animation, values }\n}\n"],"names":["defConfig","duration","easing","Easing","linear","toValue","noAnimate","toggled","current","from","to","buildConfig","config","values","checkCall","isObj","useToggleAnimate","props","onFinish","useRef","useState","Animated","Value","animation","useLayoutEffect","_value","aniChanges","setValue","timing","start"],"mappings":";;;;;;;;;AAQA,IAAMA,SAAS,GAAG;AAChBC,EAAAA,QAAQ,EAAE,IADM;AAEhBC,EAAAA,MAAM,EAAEC,qBAAM,CAACC,MAFC;AAGhBC,EAAAA,OAAO,EAAE;AAHO,CAAlB;AAeA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,OAAD,EAAUC,OAAV;AAAA,MAAqBC,IAArB,QAAqBA,IAArB;AAAA,MAA2BC,EAA3B,QAA2BA,EAA3B;AAAA,SACf,CAACH,OAAD,IAAYC,OAAO,KAAKC,IAAzB,IAAmCF,OAAO,IAAIC,OAAO,KAAKE,EAD1C;AAAA,CAAlB;AAWA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,MAAT,EAAoB;AACtC,SACEC,iBAAS,CAACF,MAAD,EAASZ,SAAT,EAAoBa,MAApB,CAAT,mIACKb,SADL,GAEMe,aAAK,CAACH,MAAD,CAAL,GAAgBA,MAAhB,GAAyB,EAF/B;AAGEP,IAAAA,OAAO,EAAEQ,MAAM,CAACH;AAHlB,IADF;AAOD,CARD;IAoBaM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,KAAK,EAAI;AACvC,MAAQL,MAAR,GAAsCK,KAAtC,CAAQL,MAAR;AAAA,MAAgBL,OAAhB,GAAsCU,KAAtC,CAAgBV,OAAhB;AAAA,MAAyBW,QAAzB,GAAsCD,KAAtC,CAAyBC,QAAzB,CADuC;AAIvC,MAAML,MAAM,GAAGM,YAAM;AAAGV,IAAAA,IAAI,EAAE,CAAT;AAAYC,IAAAA,EAAE,EAAE;AAAhB,KAAsBO,KAAK,CAACJ,MAA5B,EAArB,CAJuC;AAOvC,kBAAoBO,cAAQ,CAAC,IAAIC,uBAAQ,CAACC,KAAb,CAAmBT,MAAM,CAACL,OAAP,CAAeC,IAAlC,CAAD,CAA5B;AAAA;AAAA,MAAOc,SAAP;AAEAC,EAAAA,qBAAe,CAAC,YAAM;AACpB,QAAIlB,SAAS,CAACC,OAAD,EAAUgB,SAAS,CAACE,MAApB,EAA4BZ,MAAM,CAACL,OAAnC,CAAb,EAA0D,OADtC;AAIpB,0BAAqBK,MAAM,CAACL,OAA5B;AAAA,QAAQC,IAAR,mBAAQA,IAAR;AAAA,QAAcC,EAAd,mBAAcA,EAAd;AACA,QAAMgB,UAAU,GAAGnB,OAAO,GAAGM,MAAM,CAACL,OAAV,GAAoB;AAAEC,MAAAA,IAAI,EAAEC,EAAR;AAAYA,MAAAA,EAAE,EAAED;AAAhB,KAA9C,CALoB;AAQpBc,IAAAA,SAAS,CAACI,QAAV,CAAmBD,UAAU,CAACjB,IAA9B,EARoB;AAWpBY,IAAAA,uBAAQ,CAACO,MAAT,CAAgBL,SAAhB,EAA2BZ,WAAW,CAACC,MAAD,EAASc,UAAT,CAAtC,EAA4DG,KAA5D,CAAkE;AAAA,aAChEf,iBAAS,CAACI,QAAD,EAAWD,KAAX,EAAkBM,SAAlB,EAA6BV,MAA7B,CADuD;AAAA,KAAlE,EAXoB;AAgBrB,GAhBc,EAgBZ,CAACN,OAAD,CAhBY,CAAf;AAkBA,SAAO;AAAEgB,IAAAA,SAAS,EAATA,SAAF;AAAaV,IAAAA,MAAM,EAANA;AAAb,GAAP;AACD;;;;"}