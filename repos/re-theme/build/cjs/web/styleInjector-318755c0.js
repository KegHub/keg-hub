"use strict";var e=require("./useTheme-c66cd68a.js"),t=require("react"),r=require("@keg-hub/jsutils"),n=require("react-native-web/dist/modules/prefixStyles"),a=require("react-native-web/dist/exports/StyleSheet/flattenStyle"),o=require("react-native-web/dist/exports/StyleSheet/createReactDOMStyle"),l=require("react-native-web/dist/exports/StyleSheet/createCompileableStyle");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s,i=_interopDefaultLegacy(t),c=_interopDefaultLegacy(n),u=_interopDefaultLegacy(a),f=_interopDefaultLegacy(o),d=_interopDefaultLegacy(l),y={important:[],filter:["aspectRatio","elevation","overlayColor","resizeMode","tintColor","backgroundSize","animationKeyframes","placeholderTextColor","pointerEvents","scrollbarWidth"],allowedStyleObject:["transform","shadowOffset","textShadowOffset","animationKeyframes"]},p=r.hasDomAccess(),m=new Set,selectorExists=function(e){return m.has(e)},getKegSheet=function(){return s=s||document.head.querySelector("#".concat(e.Constants.KEG_STYLES_TAG_ID))},formatSelectors=function(e,t,n,a){var o=r.exists(a)?a:1,l=t.filter((function(e){return e&&n?e.startsWith(n):e})).reverse().slice(0,o).sort();return{selector:".".concat(l.concat([e]).join(".")).trim(),classNames:t.concat([e]).join(" ").trim()}},getSelector=function(e,t,n,a){var o="".concat(n,"-").concat(r.hashString(t)),l=r.isArr(e)?formatSelectors(o,e,n,a):r.isStr(e)?formatSelectors(o,e.split(" "),n,a):formatSelectors(o,r.noPropArr,n,a),s=l.selector;return{hashClass:o,classNames:l.classNames,selector:!selectorExists(s)&&s}},addStylesToDom=function(e,t){p&&t&&!selectorExists(e)&&(m.add(e),getKegSheet().sheet.insertRule("@media all {".concat(t.all,"}")))};e.addThemeEvent(e.Constants.BUILD_EVENT,(function(){m.clear(),getKegSheet().textContent=""})),function(){if(p){if(s=document.head.querySelector("#".concat(e.Constants.KEG_STYLES_TAG_ID)))return s;(s=document.createElement("style")).id=e.Constants.KEG_STYLES_TAG_ID,document.head.append(s)}}();var createBlock=function(e,t){var n=y.important.concat(null==t?void 0:t.important),a=c.default(f.default(e)),o=Object.keys(a).map((function(e){var t=function(e,t,r){return r.includes(e)?"".concat(t," !important"):t}(e,a[e],n),o=r.hyphenator(e);return r.isArr(t)?t.map((function(e){return"".concat(o,":").concat(e)})).join(";"):"".concat(o,":").concat(t)})).sort().join(";");return"{".concat(o,"}")},convertToCss=function(t,n){return r.flatArr(r.eitherArr(t,[t])).reduce((function(t,a){if(!r.isObj(a))return t;var o=function(t,n){var a=r.isArr(n)?y.filter.concat(n):y.filter;if(Boolean(Object.entries(t).filter((function(t){var n=e._slicedToArray(t,2),a=n[0],o=n[1];return r.isObj(o)&&!y.allowedStyleObject.includes(a)})).length))return{filtered:t};var o=r.splitByKeys(t,a),l=e._slicedToArray(o,2),s=l[0];return{style:l[1],filtered:s}}(a,null==n?void 0:n.filter),l=o.style,s=o.filtered;if(Object.assign(t.filtered,s),!l)return t;var i=u.default(l),c=d.default(i);return t.blocks.push(createBlock(c,n)),t}),{blocks:[],filtered:{}})},useStyleTag=function(n){var a,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0;s=r.isObj(s)?s:r.noOpObj;var i=e.useTheme(),c=null==i||null===(a=i.RTMeta)||void 0===a?void 0:a.size,u=null==i||null===(o=i.RTMeta)||void 0===o?void 0:o.key;return t.useMemo((function(){var e=convertToCss(n,s),t=e.blocks,r=e.filtered,a=getSelector(l,t.join(""),s.prefix||"keg",s.maxSelectors),o=a.selector,i=a.classNames,c=t.reduce((function(e,t){var r="".concat(o).concat(t);return e.all+=r,e.rules.push(r),e}),{all:"",rules:[]});return addStylesToDom(o,c),{css:c,classNames:i,filteredStyle:r}}),[n,l,c,u,s])},v=["config","children","Component","className","styleProp","splitStyles"],S=i.default.forwardRef((function(t,r){var n=t.config,a=t.children,o=t.Component,l=t.className,s=t.styleProp,c=t.splitStyles,u=e._objectWithoutProperties(t,v),f=n.className,d=e.useCompiledStyles(c),y=useStyleTag(d,l||f,n),p=y.classNames,m=y.filteredStyle;return i.default.createElement(o,e._extends({},u,e._defineProperty({},s,m),{ref:r,className:p}),a)}));exports.StyleInjector=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.noOpObj;return i.default.forwardRef((function(a,o){var l=a.__reStyleStylePropKey__||"style",s=r.splitByKeys(a,[l,"__reStyleStylePropKey__"]),c=e._slicedToArray(s,2),u=c[0],f=c[1],d=u[l];return d&&d!==r.noOpObj?i.default.createElement(S,e._extends({},f,{ref:o,config:n,Component:t,splitStyles:d,styleProp:l})):i.default.createElement(t,e._extends({},f,e._defineProperty({},l,d),{ref:o}))}))},exports.convertToCss=convertToCss,exports.createBlock=createBlock,exports.useStyleTag=useStyleTag;
//# sourceMappingURL=styleInjector-318755c0.js.map
