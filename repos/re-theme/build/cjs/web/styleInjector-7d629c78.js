"use strict";var e=require("./useTheme-6e529b68.js"),t=require("react"),r=require("@keg-hub/jsutils"),n=require("react-native-web/dist/modules/prefixStyles"),a=require("react-native-web/dist/exports/StyleSheet/flattenStyle"),o=require("react-native-web/dist/exports/StyleSheet/createReactDOMStyle"),i=require("react-native-web/dist/exports/StyleSheet/createCompileableStyle");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l,c=_interopDefaultLegacy(t),s=_interopDefaultLegacy(n),u=_interopDefaultLegacy(a),f=_interopDefaultLegacy(o),d=_interopDefaultLegacy(i),p={important:[],filter:["aspectRatio","elevation","overlayColor","resizeMode","tintColor","backgroundSize","animationKeyframes","placeholderTextColor","pointerEvents","scrollbarWidth"]},y=r.hasDomAccess(),h=new Set,getKegSheet=function(){return l=l||document.head.querySelector(e.Constants.KEG_STYLES_TAG_ID)},getSelector=function(e,t,n){var filterWithPrefix=function(e){return e&&n?e.startsWith(n):e},a=!!r.exists(e)&&(r.isArr(e)?e.filter(filterWithPrefix).pop():r.isStr(e)&&e.split(" ").filter(filterWithPrefix).pop()),o="keg-".concat(r.hashString(t));return{hashClass:o,selector:a?".".concat(a.trim(),".").concat(o).trim():".".concat(o).trim()}},addStylesToDom=function(e,t){if(y&&t&&!function(e){return h.has(e)}(e)){h.add(e);var r=getKegSheet();r.sheet.insertRule("@media all {".concat(t.all,"}"))}};e.addThemeEvent(e.Constants.BUILD_EVENT,(function(){h.clear(),getKegSheet().textContent=""})),function(){if(y){if(l=document.head.querySelector(e.Constants.KEG_STYLES_TAG_ID))return l;(l=document.createElement("style")).id=e.Constants.KEG_STYLES_TAG_ID,document.head.append(l)}}();var m=Object.freeze({}),createBlock=function(e,t){var n=p.important.concat(null==t?void 0:t.important),a=s.default(f.default(e)),o=Object.keys(a).map((function(e){var t=function(e,t,r){return r.includes(e)?"".concat(t," !important"):t}(e,a[e],n),o=r.hyphenator(e);return r.isArr(t)?t.map((function(e){return"".concat(o,":").concat(e)})).join(";"):"".concat(o,":").concat(t)})).sort().join(";");return"{".concat(o,"}")},convertToCss=function(e,t){return r.flatArr(r.eitherArr(e,[e])).reduce((function(e,n){if(!r.isObj(n))return e;var a=function(e,t){var n=r.isArr(t)?p.filter.concat(t):p.filter;return{style:r.omitKeys(e,n),filtered:r.pickKeys(e,n)}}(n,null==t?void 0:t.filter),o=a.style,i=a.filtered;Object.assign(e.filtered,i);var l=u.default(o),c=d.default(l);return e.blocks.push(createBlock(c,t)),e}),{blocks:[],filtered:{}})},useStyleTag=function(n){var a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2?arguments[2]:void 0;l=r.isObj(l)?l:m;var c=e.useTheme(),s=null==c||null===(a=c.RTMeta)||void 0===a?void 0:a.size,u=null==c||null===(o=c.RTMeta)||void 0===o?void 0:o.key;return t.useMemo((function(){var e=convertToCss(n,l),t=e.blocks,a=e.filtered,o=getSelector(i,t.join(""),"keg"),c=o.hashClass,s=o.selector,u=t.reduce((function(e,t){var r="".concat(s).concat(t);return e.all+=r,e.rules.push(r),e}),{all:"",rules:[]});return addStylesToDom(s,u),{css:u,filteredStyle:a,classList:r.eitherArr(i,[i]).concat([c])}}),[n,i,s,u,l])},v=c.default.forwardRef((function(t,n){var a=t.Component,o=t.children,i=t.config,l=t.className,s=t.style,u=e._objectWithoutProperties(t,["Component","children","config","className","style"]),f=i.className,d=useStyleTag(s,l||f,i),p=d.classList,y=d.filteredStyle;return c.default.createElement(a,e._extends({},u,{style:y,className:r.isStr(a)?p.join(" "):p,ref:n}),o)}));exports.StyleInjector=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.default.forwardRef((function(n,a){var o=n.style,i=e._objectWithoutProperties(n,["style"]);return o?c.default.createElement(v,e._extends({},i,{style:o,config:r,Component:t,ref:a})):c.default.createElement(t,e._extends({},i,{style:o,ref:a}))}))},exports.convertToCss=convertToCss,exports.createBlock=createBlock,exports.useStyleTag=useStyleTag;
//# sourceMappingURL=styleInjector-7d629c78.js.map
