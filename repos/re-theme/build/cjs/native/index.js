"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./useTheme-3225c6f8.js"),r=require("react"),t=require("@keg-hub/jsutils");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n,o,i=_interopDefaultLegacy(r),a=t.deepFreeze({BUILD_EVENT:"build",CHANGE_EVENT:"change",RESIZE_EVENT:"resize",ADD_EVENT:"addEventListener",REMOVE_EVENT:"removeEventListener",KEG_STYLES_TAG_ID:"keg-components-stylesheet",PLATFORM:{NATIVE:"$native",IOS:"$ios",android:"$android",WEB:"$web",ALL:"$all"}}),u=(n={m:"margin",mT:"marginTop",mB:"marginBottom",mR:"marginRight",mL:"marginLeft",mH:"marginHorizontal",mV:"marginVertical",p:"padding",pT:"paddingTop",pB:"paddingBottom",pR:"paddingRight",pL:"paddingLeft",pH:"paddingHorizontal",pV:"paddingVertical",bC:"borderColor",bW:"borderWidth",bS:"borderStyle"},e._defineProperty(n,"bC","borderColor"),e._defineProperty(n,"bRad","borderRadius"),e._defineProperty(n,"bTC","borderTopColor"),e._defineProperty(n,"bTW","borderTopWidth"),e._defineProperty(n,"bBC","borderBottomColor"),e._defineProperty(n,"bBW","borderBottomWidth"),e._defineProperty(n,"bRC","borderRightColor"),e._defineProperty(n,"bRW","borderRightWidth"),e._defineProperty(n,"bLC","borderLeftColor"),e._defineProperty(n,"bLW","borderLeftWidth"),e._defineProperty(n,"c","color"),e._defineProperty(n,"bg","background"),e._defineProperty(n,"bgC","backgroundColor"),e._defineProperty(n,"d","display"),e._defineProperty(n,"ovf","overflow"),e._defineProperty(n,"ovfX","overflowX"),e._defineProperty(n,"ovfY","overflowY"),e._defineProperty(n,"pos","position"),e._defineProperty(n,"z","zIndex"),e._defineProperty(n,"tp","top"),e._defineProperty(n,"bt","bottom"),e._defineProperty(n,"btm","bottom"),e._defineProperty(n,"lt","left"),e._defineProperty(n,"rt","right"),e._defineProperty(n,"bxS","boxShadow"),e._defineProperty(n,"op","opacity"),e._defineProperty(n,"ptrE","pointerEvents"),e._defineProperty(n,"otl","outline"),e._defineProperty(n,"fl","flex"),e._defineProperty(n,"flD","flexDirection"),e._defineProperty(n,"flWr","flexWrap"),e._defineProperty(n,"flB","flexBasis"),e._defineProperty(n,"flG","flexGrow"),e._defineProperty(n,"flS","flexShrink"),e._defineProperty(n,"jtC","justifyContent"),e._defineProperty(n,"alC","alignContent"),e._defineProperty(n,"alS","alignSelf"),e._defineProperty(n,"alI","alignItems"),e._defineProperty(n,"w","width"),e._defineProperty(n,"h","height"),e._defineProperty(n,"minH","minHeight"),e._defineProperty(n,"maxH","maxHeight"),e._defineProperty(n,"minW","minWidth"),e._defineProperty(n,"maxW","maxWidth"),e._defineProperty(n,"ftF","fontFamily"),e._defineProperty(n,"ftSz","fontSize"),e._defineProperty(n,"ftS","fontStyle"),e._defineProperty(n,"ftWt","fontWeight"),e._defineProperty(n,"lnH","lineHeight"),e._defineProperty(n,"ltrS","letterSpacing"),e._defineProperty(n,"txAl","textAlign"),e._defineProperty(n,"txDc","textDecoration"),e._defineProperty(n,"txDL","textDecorationLine"),n),getRNPlatform=function(){return o||(e=require("react-native").Platform,o=e);var e},s={},fireThemeEvent=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t.isArr(s[e])&&s[e].forEach((function(e){return e.apply(void 0,n)}))},f={},getCurrentTheme=function(){return f},d={entries:[["$xsmall",1],["$small",320],["$medium",768],["$large",1024],["$xlarge",1366]],hash:{},indexes:{}},buildSizeMapParts=function(){d.indexes=d.entries.reduce((function(e,r,t){return e[r[0]]=t,e[t]=r[0],d.hash[r[0]]=r[1],e}),{})},getSize=function(r){var n=t.isNum(r)&&r||t.toNum(r),o=d.entries.reduce((function(r,t){var o=e._slicedToArray(t,2),i=o[0],a=o[1];return n>=a&&(r?a>d.hash[r]&&(r=i):r=i),r}),"$xsmall");return[o,d.hash[o]]},getMergeSizes=function(e){var r=Object.keys(d.hash),t=r.indexOf(e);return[r.slice(0,t+1),r.slice(t+1)]};buildSizeMapParts();var l,loadReactNativeDimensions=function(){return require("react-native").Dimensions},checkDimensions=function(e){return function(){return(l=l||loadReactNativeDimensions())?e.apply(void 0,arguments):console.error("[ ReTheme ERROR ] - Missing Dimensions","\n   - You must initialize 'Dimensions' before using the 'ReThemeProvider'","\n   - Do this by calling 'setRNDimensions(Dimensions)'","\n   - The first argument must be the 'Dimensions' export of 'react-native'","\n   - Or an Object with a matching API")}},p={get:checkDimensions((function(){var e;return l?(e=l).get.apply(e,arguments):{width:0,height:0}})),set:checkDimensions((function(){var e;l&&(e=l).set.apply(e,arguments)})),update:checkDimensions((function(){var e;l&&(e=l).update.apply(e,arguments)})),addEventListener:checkDimensions((function(){var e;l&&(e=l).addEventListener.apply(e,arguments)})),removeEventListener:checkDimensions((function(){var e;l&&(e=l).removeEventListener.apply(e,arguments)}))},useDimensions=function(){var t=r.useState(p.get("window")),n=e._slicedToArray(t,2),o=n[0],i=n[1],onChange=function(e){var r=e.window,t=r.width,n=r.height,o=r.scale,a=r.fontScale;i({width:t,height:n,scale:o,fontScale:a})};return r.useEffect((function(){return p.addEventListener("change",onChange),function(){return onChange.shouldUnmount=!0,p.removeEventListener("change",onChange)}}),[]),o},c=a.PLATFORM,getPlatforms=function(){var e,r,n,o=(e=getRNPlatform(),r=t.get(e,"OS"),n=[],"web"!==r&&n.push("$native"),n.push("$"+r),[a.PLATFORM.ALL].concat(n)),i=Object.values(c).filter((function(e){return!o.includes(e)}));return[o,i]},getTheme=function(){for(var r=getCurrentTheme(),n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.deepMerge.apply(void 0,e._toConsumableArray(o.reduce((function(e,n){var o=t.isObj(n)?n:t.isStr(n)||t.isArr(n)?t.get(r,n):null;return o&&e.push(o),e}),[])))},extract=function(e,r){if(!e[r])return e;var n=e[r];return delete e[r],t.deepMerge(e,n)},m=function compileStyles(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.isObj(r))return r;var o=n.platforms,i=n.sizes,a=n.omit,s=n.aliases,f=void 0===s?u:s,d=Object.entries(r).reduce((function(r,u){var s=e._slicedToArray(u,2),d=s[0],l=s[1];if(o.includes(d)||i.includes(d))r[d]=e._objectSpread2(e._objectSpread2({},r[d]),compileStyles(l,n));else if(!a.includes(d)){var p=f[d]||d;r[p]=t.isObj(l)?e._objectSpread2(e._objectSpread2({},r[p]),compileStyles(l,n)):l}return r}),{}),l=o.reduce(extract,d),p=i.reduce(extract,l);return p},useCurrentSize=function(){var t=useDimensions(),n=r.useMemo((function(){return getSize(t.width)}),[t.width]),o=e._slicedToArray(n,2);return[o[0],o[1],t]},usePlatforms=function(){return r.useMemo((function(){return getPlatforms()}),[])},nativeThemeHook=function(n,o,i){var a=t.get(i,"ref",r.useRef()),u=r.useState(n),s=e._slicedToArray(u,2),f=s[0],d=s[1];return r.useLayoutEffect((function(){var e,r;(e=n)!==(r=f)&&!t.shallowEqual(e,r)&&d(f)}),[n,o]),[a,n,d]};exports.ReThemeContext=e.ReThemeContext,exports.getDefaultTheme=e.getDefaultTheme,exports.setDefaultTheme=e.setDefaultTheme,exports.useTheme=e.useTheme,exports.ReThemeProvider=function(n){var o=n.children,u=n.theme,s=n.merge,d=function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=usePlatforms(),a=e._slicedToArray(i,2),u=a[0],s=a[1],f=useCurrentSize(),d=e._slicedToArray(f,3),l=d[0],p=d[1],c=d[2],h=c.width,y=c.height,v=r.useMemo((function(){return getMergeSizes(l)||t.noPropArr}),[l]),g=e._slicedToArray(v,2),_=g[0],b=g[1],P=r.useMemo((function(){return s.concat(b)}),[s,b]),x=r.useMemo((function(){return o?{key:l,size:p,width:h,height:y}:null}),[l,p,h,y]),T=r.useMemo((function(){return m(n,{platforms:u,sizes:_,omit:P})}),[n,u,l]);return o&&(T.get=getTheme,T.RTMeta=x),T}(function(n,o){return r.useMemo((function(){if(!o)return n;var r=e.getDefaultTheme();return r&&r!==n?t.deepMerge(r,n):n}),[n,o])}(u,Boolean(s||!s&&!1!==s)||!1),!0);return f=d,r.useEffect((function(){fireThemeEvent(a.BUILD_EVENT,d)}),[d]),i.default.createElement(e.ReThemeContext.Provider,{value:d},o)},exports.addThemeEvent=function(e,r){if(e&&t.isFunc(r))return s[e]=s[e]||[],s[e].push(r),s[e].length-1},exports.fireThemeEvent=fireThemeEvent,exports.getMergeSizes=getMergeSizes,exports.getSize=getSize,exports.getSizeMap=function(){return d},exports.removeThemeEvent=function(e,r){e&&s[e]&&(r||0===r)&&(t.isNum(r)?s[e].splice(r,1):t.isFunc(r)&&t.isArr(s[e])&&(s[e]=s[e].filter((function(e){return e!==r}))))},exports.setRNDimensions=function(e){return e},exports.setRNPlatform=function(e){},exports.setSizes=function(e){return t.isObj(e)?(t.mapObj(e,(function(r,n){var o=d.indexes[r];if(!t.softFalsy(o))return t.logData("Invalid ".concat(r," for theme size! Allowed keys are xsmall | small | medium | large | xlarge"),"warn");var i=t.toNum(e[r]);if(!i||!d.entries[o])return t.logData("Invalid size entry. Size must be a number and the size entry must exist!","Size: ".concat(i),"Entry: ".concat(d.entries[o]),"warn");d.entries[o]=[r,i]})),buildSizeMapParts(),d):t.logData("setDimensions method requires an argument of type 'Object'.\nReceived: ",e,"error")},exports.useDimensions=useDimensions,exports.usePointerState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.noOpObj;return{hover:!1,focus:!1,active:!1,events:t.noOpObj,ref:e.ref}},exports.useStyle=function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=e.useTheme();return r.useMemo((function(){return a.get.apply(a,o)||t.noPropObj}),[a].concat(o))},exports.useStylesCallback=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.noPropArr,i=arguments.length>2?arguments[2]:void 0,a=r.useCallback(n,o),u=e.useTheme(),s=!(!i||!t.isObj(i)||t.isEmptyColl(i))&&i;return r.useMemo((function(){return t.checkCall.apply(void 0,[a,u,s].concat(e._toConsumableArray(o)))||t.noPropObj}),[u,a,s])},exports.useThemeActive=nativeThemeHook,exports.useThemeFocus=nativeThemeHook,exports.useThemeHover=nativeThemeHook,exports.withTheme=function(r){return function(t){return i.default.createElement(e.ReThemeContext.Consumer,null,(function(n){return i.default.createElement(r,e._extends({theme:n},t))}))}};
//# sourceMappingURL=index.js.map
