import{m as e,C as t,d as r,o as n,u as o,_ as a}from"./useTheme-c9bf4c4a.js";import c,{useMemo as i}from"react";import{hasDomAccess as l,omitKeys as s,pickKeys as u,isArr as f,exists as m,isStr as d,hashString as p,isObj as v,eitherArr as y,hyphenator as h,flatArr as S}from"@keg-hub/jsutils";import b from"react-native-web/dist/modules/prefixStyles";import E from"react-native-web/dist/exports/StyleSheet/flattenStyle";import g from"react-native-web/dist/exports/StyleSheet/createReactDOMStyle";import C from"react-native-web/dist/exports/StyleSheet/createCompileableStyle";var T,_={important:[],filter:["aspectRatio","elevation","overlayColor","resizeMode","tintColor","backgroundSize","animationKeyframes","placeholderTextColor","pointerEvents","scrollbarWidth"]},j=l(),k=new Set,getKegSheet=function(){return T=T||document.head.querySelector(t.KEG_STYLES_TAG_ID)},getSelector=function(e,t,r){var filterWithPrefix=function(e){return e&&r?e.startsWith(r):e},n=!!m(e)&&(f(e)?e.filter(filterWithPrefix).pop():d(e)&&e.split(" ").filter(filterWithPrefix).pop()),o="keg-".concat(p(t));return{hashClass:o,selector:n?".".concat(n.trim(),".").concat(o).trim():".".concat(o).trim()}},addStylesToDom=function(e,t){j&&t&&!function(e){return k.has(e)}(e)&&(k.add(e),getKegSheet().sheet.insertRule("@media all {".concat(t.all,"}")))};e(t.BUILD_EVENT,(function(){k.clear(),getKegSheet().textContent=""})),function(){if(j){if(T=document.head.querySelector(t.KEG_STYLES_TAG_ID))return T;(T=document.createElement("style")).id=t.KEG_STYLES_TAG_ID,document.head.append(T)}}();var w=Object.freeze({}),createBlock=function(e,t){var r=_.important.concat(null==t?void 0:t.important),n=b(g(e)),o=Object.keys(n).map((function(e){var t=function(e,t,r){return r.includes(e)?"".concat(t," !important"):t}(e,n[e],r),o=h(e);return f(t)?t.map((function(e){return"".concat(o,":").concat(e)})).join(";"):"".concat(o,":").concat(t)})).sort().join(";");return"{".concat(o,"}")},convertToCss=function(e,t){return S(y(e,[e])).reduce((function(e,r){if(!v(r))return e;var n=function(e,t){var r=f(t)?_.filter.concat(t):_.filter;return{style:s(e,r),filtered:u(e,r)}}(r,null==t?void 0:t.filter),o=n.style,a=n.filtered;Object.assign(e.filtered,a);var c=E(o),i=C(c);return e.blocks.push(createBlock(i,t)),e}),{blocks:[],filtered:{}})},useStyleTag=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;a=v(a)?a:w;var c=r(),l=null==c||null===(t=c.RTMeta)||void 0===t?void 0:t.size,s=null==c||null===(n=c.RTMeta)||void 0===n?void 0:n.key;return i((function(){var t=convertToCss(e,a),r=t.blocks,n=t.filtered,c=getSelector(o,r.join(""),"keg"),i=c.hashClass,l=c.selector,s=r.reduce((function(e,t){var r="".concat(l).concat(t);return e.all+=r,e.rules.push(r),e}),{all:"",rules:[]});return addStylesToDom(l,s),{css:s,filteredStyle:n,classNames:y(o,[o]).concat([i]).join(" ")}}),[e,o,l,s,a])},x=["Component","children","config","className","style"],N=["style"],R=c.forwardRef((function(e,t){var r=e.Component,i=e.children,l=e.config,s=e.className,u=e.style,f=n(e,x),m=l.className,d=o(u),p=useStyleTag(d,s||m,l),v=p.classNames,y=p.filteredStyle;return c.createElement(r,a({},f,{style:y,className:v,ref:t}),i)})),StyleInjector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.forwardRef((function(r,o){var i=r.style,l=n(r,N);return i?c.createElement(R,a({},l,{style:i,config:t,Component:e,ref:o})):c.createElement(e,a({},l,{style:i,ref:o}))}))};export{StyleInjector as S,convertToCss as a,createBlock as c,useStyleTag as u};
//# sourceMappingURL=styleInjector-74b3daaa.js.map
