{"version":3,"file":"wait-8ca88995.js","sources":["../../src/promise/promisify.js","../../src/promise/promisifyAll.js","../../src/promise/wait.js"],"sourcesContent":["import { isFunc } from '../method/isFunc'\n\n/**\n * Converts a standard callback method into Promise\n * @param {Function} method - Function to convert into a promise\n * @function\n *\n * @return {Promise<Function>} - Passed in method converted into a promise\n */\nexport const promisify = method => {\n  if (!isFunc(method)) throw `Argument must be a function`\n\n  return (...args) => {\n    return new Promise((res, rej) => {\n      // If the last arg is not a function, just return the resolved method\n      if (!isFunc(args[args.length - 1])) return res(method(...args))\n\n      // Remove the callback method\n      args.pop()\n      // Replace it with the promise resolve / reject\n      args.push((...cbData) => {\n        // If the cbData first arg is not falsy, then reject the promise\n        // Otherwise resolve it\n        return cbData && cbData[0] ? rej(...cbData) : res(...cbData)\n      })\n\n      // Call the method, and return it\n      return method(...args)\n    })\n  }\n}\n","import { isObj } from '../object/isObj'\nimport { isFunc } from '../method/isFunc'\nimport { promisify } from './promisify'\n\n/**\n * Creates an array of Object default properties not to convert into promises\n * @ignore\n */\nconst defObjProps = Array.from([\n  'caller',\n  'callee',\n  'arguments',\n  'apply',\n  'bind',\n  'call',\n  'toString',\n  '__proto__',\n  '__defineGetter__',\n  '__defineSetter__',\n  'hasOwnProperty',\n  '__lookupGetter__',\n  '__lookupSetter__',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'valueOf',\n  'toLocaleString',\n])\n  .concat(Object.getOwnPropertyNames(Object.prototype))\n  .reduce((map, functionName) => {\n    map[functionName] = true\n    return map\n  }, {})\n\n/**\n * Loops an object and looks for any methods that belong to the object, then add an Async version\n * @param {Object} object\n * @return {Object} - object with Async methods added\n */\nconst addAsync = object => {\n  if (!object.__IS_PROMISIFIED__) {\n    for (const prop of Object.getOwnPropertyNames(object)) {\n      const isAsync = prop.indexOf('Async') !== -1 || object[`${prop}Async`]\n      if (isAsync || defObjProps[prop]) continue\n\n      if (isFunc(object[prop])) object[`${prop}Async`] = promisify(object[prop])\n      else {\n        const getValue = Object.getOwnPropertyDescriptor(object, prop).get\n        if (isFunc(getValue)) object[`${prop}Async`] = promisify(getValue)\n      }\n    }\n    object.__IS_PROMISIFIED__ = true\n  }\n\n  return object\n}\n\n/**\n * Converts Objects method properties into promiseAsync. allow using promisifyAll\n * @function\n * @param {Object} object\n * @return {Object} - promisified object\n */\nexport const promisifyAll = object => {\n  if (!isObj(object)) return object\n\n  addAsync(object)\n  const proto = Object.getPrototypeOf(object)\n\n  proto && Object.getPrototypeOf(proto) !== null && addAsync(proto)\n\n  return object\n}\n","'use strict'\n\n/**\n * Stops execution for a given amount of time\n * @function\n * @param {Number} time - Amount of time to wait\n * @return { void }\n */\nexport const wait = time =>\n  new Promise(res => setTimeout(() => res(true), time))\n"],"names":["promisify","method","isFunc","args","Promise","res","rej","length","pop","push","cbData","defObjProps","Array","from","concat","Object","getOwnPropertyNames","prototype","reduce","map","functionName","addAsync","object","__IS_PROMISIFIED__","prop","isAsync","indexOf","getValue","getOwnPropertyDescriptor","get","promisifyAll","isObj","proto","getPrototypeOf","wait","time","setTimeout"],"mappings":"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"}